(function(e){e.fn.fullscreen=function(){return this.each(function(){var t=e(this),n=e("<div>"),r=e("<img>"),i=t.css("background-image").replace("url(","").replace(")","");t.css({"background-image":"none"});r.attr("src",i).load(function(i){t.prepend(n.prepend(r));image_ratio=r.width()/r.height();n.hide();window_ratio=e(window).width()/e(window).height();n.css({"z-index":"-1",position:"fixed",height:"100%",width:"100%"});window_ratio>image_ratio?r.css({width:"100%"}):r.css({height:"100%"});n.fadeIn()})})}})(jQuery);